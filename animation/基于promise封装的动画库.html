<!DOCTYPE html>
<html>

<head>
    <style>
        #block {
            position: absolute;
            left: 200px;
            top: 200px;
            width: 20px;
            height: 20px;
            background:red;
            line-height: 80px;
            border-radius: 50%;

        }
    </style>
</head>

<body>
    <button type="button" id='btn'>暂停</button>
    <button type="button" id='continuebtn'>继续</button>

    <div id='block'></div>
    <script>
        class Animator {
            constructor(fn, duration = 500) {
                this.duration = duration;
                this.pauseState = false;
                this.beginDelay = 0;
                this.endDelay = 0;
                this.start = 0;
                this.fn = fn;
            }
            go(delay = 0) {
                if (!delay) this.start = Date.now();

                return new Promise((resolve, reject) => {
                    let frameFn = () => {
                        var proport = (Date.now() - this.start - delay) / this.duration;
                        if (proport < 1) {
                            this.fn(proport);
                            if (!this.pauseState)  requestAnimationFrame(frameFn);
                        } else {
                            this.fn(1);
                            resolve('done');
                        }
                    }
                    requestAnimationFrame(frameFn);
                })
            }
            pause() {
                this.pauseState = true;
                this.beginDelay = Date.now();
            }
            continue() {
                this.pauseState = false;
                this.endDelay = Date.now();
                // console.log('------------------------------', this.endDelay - this.beginDelay)
                this.go(this.endDelay - this.beginDelay)
            }
        }
        var a1 = new Animator(function (p) {
            var tx = parseInt(800 * p);
            // console.log('--------------------',tx);
            block.style.transform = 'translateX(' + tx + 'px)';
        }, 3000);

        var a2 = new Animator(function (p) {
            var ty = 600 * p;

            block.style.transform = 'translate(800px,' + ty + 'px)';
        }, 3000);

        block.addEventListener('click', async function () {
            await a1.go();
            await a2.go();
        });
        btn.addEventListener('click', function () {
            a1.pause();
        })
        continuebtn.addEventListener('click', function () {
            a1.continue();
        })
    </script>
</body>

</html>